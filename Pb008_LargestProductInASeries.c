#include <stdio.h>

long long charToInt(char c);
long long largestProductInASeries(int number);
void printAdjacentDigits(int adjacent_digits[], int number);

long long largestProductInASeries(int number){
	long long product = 1;
	long long temp_product = 1;
	int adjacent_digits[20];
	//int number_length = 1000;
	int i = 0;
	int j = 0;
	char longnumber[2000] = "73167176531330624919225119674426574742355349194934";
	strcat(longnumber, "96983520312774506326239578318016984801869478851843"); 
	strcat(longnumber, "85861560789112949495459501737958331952853208805511");
	strcat(longnumber, "12540698747158523863050715693290963295227443043557");
	strcat(longnumber, "66896648950445244523161731856403098711121722383113");
	strcat(longnumber, "62229893423380308135336276614282806444486645238749");
	strcat(longnumber, "30358907296290491560440772390713810515859307960866");
	strcat(longnumber, "70172427121883998797908792274921901699720888093776");
	strcat(longnumber, "65727333001053367881220235421809751254540594752243");
	strcat(longnumber, "52584907711670556013604839586446706324415722155397");
	strcat(longnumber, "53697817977846174064955149290862569321978468622482");
	strcat(longnumber, "83972241375657056057490261407972968652414535100474");
	strcat(longnumber, "82166370484403199890008895243450658541227588666881");
	strcat(longnumber, "16427171479924442928230863465674813919123162824586");
	strcat(longnumber, "17866458359124566529476545682848912883142607690042");
	strcat(longnumber, "24219022671055626321111109370544217506941658960408");
	strcat(longnumber, "07198403850962455444362981230987879927244284909188");
	strcat(longnumber, "84580156166097919133875499200524063689912560717606");
	strcat(longnumber, "05886116467109405077541002256983155200055935729725");
	strcat(longnumber, "71636269561882670428252483600823257530420752963450");
	
	
	for(i=0 ; i<=strlen(longnumber)-number ; i++){
		temp_product = 1;
		for(j=0 ; j<number; j++){
			adjacent_digits[j] = longnumber[i+j];
			temp_product = temp_product*charToInt(longnumber[i+j]);
		}
		if(temp_product > product){
			product = temp_product;
			printAdjacentDigits(adjacent_digits, number);
			printf(" = %I64u \n", product);
		}
	}
	
	return product;
}

void printAdjacentDigits(int adjacent_digits[], int number){
	int j = 0;
	printf("%c", adjacent_digits[0]);
	for(j=1 ; j<number; j++){
		printf("*%c", adjacent_digits[j]);
	}
}

long long charToInt(char c){
	long long num = c - '0';
	//printf("\t\t Converted: %d\n", num);
	return num;
}

void printProblemStatement(){
	printf("Problem 8:\n");
	printf("Largest product in a series\n");
	printf("=================================\n");
	printf("The four adjacent digits in the 1000-digit number that have the greatest product are 9 * 9 * 8 * 9 = 5832.\n");

	printf("73167176531330624919225119674426574742355349194934\n");
	printf("96983520312774506326239578318016984801869478851843\n");
	printf("85861560789112949495459501737958331952853208805511\n");
	printf("12540698747158523863050715693290963295227443043557\n");
	printf("66896648950445244523161731856403098711121722383113\n");
	printf("62229893423380308135336276614282806444486645238749\n");
	printf("30358907296290491560440772390713810515859307960866\n");
	printf("70172427121883998797908792274921901699720888093776\n");
	printf("65727333001053367881220235421809751254540594752243\n");
	printf("52584907711670556013604839586446706324415722155397\n");
	printf("53697817977846174064955149290862569321978468622482\n");
	printf("83972241375657056057490261407972968652414535100474\n");
	printf("82166370484403199890008895243450658541227588666881\n");
	printf("16427171479924442928230863465674813919123162824586\n");
	printf("17866458359124566529476545682848912883142607690042\n");
	printf("24219022671055626321111109370544217506941658960408\n");
	printf("07198403850962455444362981230987879927244284909188\n");
	printf("84580156166097919133875499200524063689912560717606\n");
	printf("05886116467109405077541002256983155200055935729725\n");
	printf("71636269561882670428252483600823257530420752963450\n");

	printf("Find the thirteen adjacent digits in the 1000-digit number that have the greatest product. What is the value of this product?\n\n");
}

int main (void){
	printProblemStatement();
	printf("Solution\n");
	printf("=========\n");
	printf("The largest product in the series is: %I64u\n", largestProductInASeries(13));
	return 0;
}
